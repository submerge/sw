<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
		<link rel="stylesheet" type="text/css" href="./css/index.css">
		<link rel="manifest" href="/sw/manifest.json">
		<script type="text/javascript" src="./js/index.js"></script>
		<script type="text/javascript">
			console.log('sdf');
		</script>
		<script type="text/javascript">
			window.addEventListener('load', function() {

				// 在 index.js 中
				/*if (SW.controller) { // 这是当前页面的 `controller`
				    	console.log('send message ::');
				      	SW.controller.postMessage("fetch document")
				}*/

			    // 执行注册
			    navigator.serviceWorker.register('./sw.js').then(function(registration) {
					console.log(registration);      
			    }).catch(function(err) {
			      	console.log(err);
			    });
  			});

  			var SW = navigator.serviceWorker;
  			if (SW.controller) {
		      	console.log('send message ::');
		      	SW.controller.postMessage(location.href)
		    }

			window.onload = function () {
				var pushButton = document.querySelector('.js-push-button');
				pushButton.addEventListener('click', function () {
					Notification.requestPermission();
				})
			}
		</script>
	</head>

	<body>
		<button class="js-push-button">test v2 v3</button>
		<h1>service wrok</h1>
		<p>v3</p>
	</body>
</html>
